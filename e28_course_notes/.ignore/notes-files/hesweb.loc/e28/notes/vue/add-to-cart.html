<!DOCTYPE html>
<html lang="en">

<head>
  <title>Notes: vue/add-to-cart</title>
  <meta charset="utf-8">

  <link rel="shortcut icon" href="../../../favicon/favicon.ico">

  <link href="../../../css/notes%EF%B9%96cachebust=20200305.css" rel="stylesheet">
  <style type="text/css">
    #searchResults #searchTerm {
      background-color: #ffffff;
      padding: 5px;
      margin-bottom: 10px;
      font-style: italic;
    }

    #searchResults .result {
      margin-top: 30px;
      padding: 10px;
    }

    #searchResults .context {
      border-left: 5px solid #eee;
      margin-top: 10px;
      padding: 10px;
    }

    #searchResults .highlight {
      background-color: yellow;
    }
  </style>
  <style type="text/css">
    /* Base16 Atelier Sulphurpool Light - Theme */
    /* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/sulphurpool) */
    /* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */

    /* Atelier-Sulphurpool Comment */
    .hljs-comment,
    .hljs-quote {
      color: #6b7394;
    }

    /* Atelier-Sulphurpool Red */
    .hljs-variable,
    .hljs-template-variable,
    .hljs-attribute,
    .hljs-tag,
    .hljs-name,
    .hljs-regexp,
    .hljs-link,
    .hljs-name,
    .hljs-selector-id,
    .hljs-selector-class {
      color: #c94922;
    }

    /* Atelier-Sulphurpool Orange */
    .hljs-number,
    .hljs-meta,
    .hljs-built_in,
    .hljs-builtin-name,
    .hljs-literal,
    .hljs-type,
    .hljs-params {
      color: #c76b29;
    }

    /* Atelier-Sulphurpool Green */
    .hljs-string,
    .hljs-symbol,
    .hljs-bullet {
      color: #ac9739;
    }

    /* Atelier-Sulphurpool Blue */
    .hljs-title,
    .hljs-section {
      color: #3d8fd1;
    }

    /* Atelier-Sulphurpool Purple */
    .hljs-keyword,
    .hljs-selector-tag {
      color: #6679cc;
    }

    .hljs {
      display: block;
      overflow-x: auto;
      background: #f5f7ff;
      color: #5e6687;
      padding: 0.5em;
    }

    .hljs-emphasis {
      font-style: italic;
    }

    .hljs-strong {
      font-weight: bold;
    }
  </style>
  <style type="text/css">
    /* Blueish */
    .highlight {
      background-color: #FFE787;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-weight: 600;
      line-height: 1.25;
    }

    h2 {
      font-size: 2.5rem;
      border-bottom: 1px solid #eaecef;
      padding-bottom: 0.3rem;
      margin-top: 60px;
    }

    h3 {
      font-size: 2rem;
    }

    span.heading-anchor {
      display: block;
      border: 1px solid red;
      position: relative;
      top: -75px;
      visibility: hidden;
    }

    a.heading-link:link,
    a.heading-link:visited,
    a.heading-link:active {
      color: #ddd;
      border-bottom: 0;
    }

    a.heading-link:hover {
      color: #005b96;
    }

    img {
      width: 100%;
      margin: 10px 0px;
    }

    p {
      line-height: 1.7;
    }

    pre {
      max-width: 100%;
      overflow-x: auto;
    }

    code {
      color: #B71C1C;
      background-color: #f8f8f8;
      padding: 3px 5px;
      font-size: 1.5rem;
      font-family: 'Roboto Mono', Monaco, courier, monospace;
    }

    #nav {
      border-top: 1px solid #eaecef;
      padding-top: 10px;
      margin-top: 20px;
    }

    a:link.nav,
    a:visited.nav {
      display: block;
      padding: 5px;
      border: 0;
    }

    a:link.nav#prev,
    a:visited.nav#prev {
      float: left;
    }

    a:link.nav#next,
    a:visited.nav#next {
      float: right;
    }

    .squareTag {
      border: 10px solid #aaa;
      /* Each tag will overwrite this with its own color */
      margin-top: 40px;
      margin-bottom: 40px;
      padding: 20px;
    }

    .squareTag .banner {
      text-align: center;
      font-size: 3rem;
      font-weight: bold;
    }

    .squareTag .icon {
      padding-right: 10px;
    }

    .squareTag h1,
    .squareTag h2,
    .squareTag h3,
    .squareTag h4,
    .squareTag h5,
    .squareTag h6 {
      color: #2b2b2b;
    }

    .important {
      border-color: #f9d9d9;
    }

    .important .banner {
      color: #f9d9d9;
    }

    .fyi {
      border-color: #f7f7f7;
    }

    .fyi .banner {
      color: #aaa;
    }

    #suggestAnEditButton {
      margin-bottom: 20px;
    }

    #suggestAnEdit {
      position: relative;
      font-size: 1.5rem;
      background-color: #f7f7f7;
      padding: 20px;
      margin-bottom: 20px;
    }

    #suggestAnEdit h2 {
      margin-top: 0;
    }

    #suggestAnEdit #cancelSuggestion {
      position: absolute;
      right: 10px;
      top: 10px;
      text-align: center;
    }

    #suggestAnEdit #cancelSuggestion:hover {
      color: #005b96;
      cursor: pointer;
    }

    #suggestAnEdit textarea {
      font-family: 'Courier New', Courier, monospace;
      width: 100%;
      height: 200px;
    }

    #suggestionConfirmation {
      border-radius: 3px;
      padding: 10px;
      margin-bottom: 30px;
      color: #2ECC40;
      font-weight: bold;
    }
  </style>
</head>

<body>
  <div id="app">
    <header dusk="notesHeader">
      <h1><a href="https://hesweb.dev/e28">e28</a> |
        <a href="../../notes.html"><i class="fa fa-book"></i> Notes</a>
      </h1>
    </header>
    <menu>
      <ul>
        <li class="level-0">Misc

          <ul>
            <li><a href="../misc/e28-about.html" class="">About the notes</a></li>
            <li><a href="../misc/philosophy.html" class="">Learning philosophies</a></li>
            <li><a href="../misc/e28-intro.html" class="">Course introduction</a></li>
            <li><a href="../misc/markdown.html" class="">Markdown</a></li>
            <li><a href="../misc/vscode.html" class="">VSCode</a></li>
          </ul>
        </li>
        <li class="level-0">Command line

          <ul>
            <li><a href="../command-line/intro.html" class="">Introduction</a></li>
            <li><a href="../command-line/mac-terminal.html" class="">Mac Terminal</a></li>
            <li><a href="../command-line/windows-cmder.html" class="">Windows Cmder</a></li>
            <li><a href="../command-line/primer.html" class="">Primer</a></li>
            <li><a href="../command-line/nano.html" class="">Text editing with Nano</a></li>
            <li><a href="../command-line/common-commands.html" class="">Common commands</a></li>
          </ul>
        </li>
        <li class="level-0">Local server

          <ul>
            <li><a href="../local-server/intro.html" class="">Introduction</a></li>
            <li><a href="../local-server/xampp-mac.html" class="">Mac - XAMPP</a></li>
            <li><a href="../local-server/xampp-windows.html" class="">Windows - XAMPP</a></li>
            <li><a href="../local-server/local-domains.html" class="">Local domains</a></li>
          </ul>
        </li>
        <li class="level-0">Git

          <ul>
            <li><a href="../git/intro.html" class="">Introduction</a></li>
            <li><a href="../git/setup.html" class="">Setup</a></li>
            <li><a href="../git/github.html" class="">Github</a></li>
            <li><a href="../git/repository-setup.html" class="">Repository setup</a></li>
            <li><a href="../git/tracking-changes.html" class="">Tracking changes</a></li>
          </ul>
        </li>
        <li class="level-0">Production server

          <ul>
            <li><a href="../production-server/setup.html" class="">DigitalOcean setup</a></li>
            <li><a href="../production-server/production-domains.html" class="">Production domains</a></li>
            <li><a href="../production-server/deploying.html" class="">Deploying</a></li>
            <li><a href="../production-server/summary.html" class="">Summary</a></li>
            <li><a href="../production-server/https.html" class="">HTTPS</a></li>
            <li><a href="../production-server/static-hosting.html" class="">Static hosting</a></li>
          </ul>
        </li>
        <li class="level-0">JavaScript

          <ul>
            <li><a href="../javascript/review.html" class="">Review</a></li>
            <li><a href="../javascript/evolution.html" class="">Evolution</a></li>
          </ul>
        </li>
        <li class="level-0">Vue.js essentials

          <ul>
            <li><a href="intro.html" class="">Introduction</a></li>
            <li><a href="behind-the-scenes.html" class="">Behind the scenes</a></li>
            <li><a href="vue3.html" class="">Vue 3</a></li>
            <li><a href="conditional-rendering.html" class="">Conditional rendering</a></li>
            <li><a href="list-rendering.html" class="">List rendering</a></li>
            <li><a href="event-handling.html" class="">Event handling</a></li>
            <li><a href="attribute-binding.html" class="">Attribute binding</a></li>
            <li><a href="form-input-binding.html" class="">Form input binding</a></li>
            <li><a href="computed-properties.html" class="">Computed properties</a></li>
            <li><a href="watchers.html" class="">Watchers</a></li>
            <li><a href="lifecycle-hooks.html" class="">Lifecycle hooks</a></li>
          </ul>
        </li>
        <li class="level-0">Vue.js components

          <ul>
            <li><a href="components.html" class="">Components</a></li>
            <li><a href="components-props.html" class="">Props</a></li>
            <li><a href="components-events.html" class="">Events</a></li>
            <li><a href="components-slots.html" class="">Slots</a></li>
            <li><a href="single-file-components.html" class="">Single file components</a></li>
          </ul>
        </li>
        <li class="level-0">Build systems

          <ul>
            <li><a href="build-systems.html" class="">Introduction</a></li>
            <li><a href="package-management.html" class="">Package management (NPM)</a></li>
            <li><a href="build-integrated-local.html" class="">Integrated build - Local</a></li>
            <li><a href="build-integrated-production.html" class="">Integrated build - Production</a></li>
            <li><a href="build-comprehensive.html" class="">Comprehensive build (Vue CLI)</a></li>
          </ul>
        </li>
        <li class="level-0">Applications

          <ul>
            <li><a href="applications-intro.html" class="">Introduction</a></li>
            <li><a href="zipfoods-start.html" class="">Building ZipFoods</a></li>
            <li><a href="diy-spa.html" class="">DIY SPA</a></li>
            <li><a href="vue-router.html" class="">Vue Router</a></li>
            <li><a href="vue-router-production.html" class="">Vue Router on production</a></li>
            <li><a href="apis.html" class="">Server APIs</a></li>
            <li><a href="e28-api.html" class="">e28-api</a></li>
            <li><a href="ajax.html" class="">Ajax - Client/Server communication</a></li>
            <li><a href="local-storage.html" class="">Local storage</a></li>
            <li><a href="add-to-cart.html" class="router-link-exact-active router-link-active">Add to cart</a></li>
            <li><a href="vuex.html" class="">State management w/ Vuex</a></li>
            <li><a href="auth-intro.html" class="">Auth: Intro &amp; config</a></li>
            <li><a href="auth-usage.html" class="">Auth: Usage</a></li>
            <li><a href="auth-prod.html" class="">Auth: Production</a></li>
            <li><a href="testing.html" class="">Testing: Introduction</a></li>
            <li><a href="testing-e2e.html" class="">Testing: E2E</a></li>
            <li><a href="validation.html" class="">Validation</a></li>
            <li><a href="composition-api.html" class="">Composition API</a></li>
          </ul>
        </li>
        <li class="level-0">Appendix

          <ul>
            <li><a href="../appendix/apache-configs.html" class="">Apache configs</a></li>
          </ul>
        </li>
      </ul>
    </menu>
    <div id="main">
      <div id="centerInMain">
        <div id="notesComponent">
          <div id="notes">
            <h1 id="jump-emadd-to-cartem-local-storage-amp-state-management"><span
                    id="emadd-to-cartem-local-storage-amp-state-management" class="heading-anchor"></span><a
                 href="#emadd-to-cartem-local-storage-amp-state-management" class="heading-link"><i
                   class="fa fa-link"></i> </a> <em>Add to cart</em> - Local storage &amp; state management</h1>
            <p>Goals:</p>
            <ul>
              <li>An <em>Add to cart</em> button on the product page</li>
              <li>Implement <a
                   href="https://github.com/susanBuck/e28/blob/master/zipfoods/src/common/Cart.js">Cart.js</a>, a class
                designed to interface with local storage and handle all our cart-specific functionality.</li>
              <li>Create cart page that displays all items in the cart with a button to remove an item.</li>
              <li>Add a cart count that shows in the nav bar and is dynamically updated when items are added/removed
                from the cart.</li>
            </ul>
            <h2 id="jump-emadd-to-cartem-button"><span id="emadd-to-cartem-button" class="heading-anchor"></span><a
                 href="#emadd-to-cartem-button" class="heading-link"><i class="fa fa-link"></i> </a> <em>Add to
                cart</em> button</h2>
            <p>To start, we’ll create an <em>Add to Cart</em> button that will display on the product page. This button
              should trigger a method we’ll create called <code v-pre>addToCart</code>. This method will have 1
              parameter, a
              product id.</p>
            <pre v-pre><code v-pre class="language-html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">'addToCart'</span>&gt;</span>Add to cart<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
            <pre v-pre><code v-pre class="language-js hljs javascript">methods: {
    addToCart() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.product.id);
    }
},
</code></pre>
            <h2 id="jump-plan-our-cart-data"><span id="plan-our-cart-data" class="heading-anchor"></span><a
                 href="#plan-our-cart-data" class="heading-link"><i class="fa fa-link"></i> </a> Plan our cart data</h2>
            <p>Next, we should plan how our cart data will be stored.</p>
            <p>Here’s an example data structure we can aim for:</p>
            <pre v-pre><code v-pre class="language-js hljs javascript">[
    { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">quantity</span>: <span class="hljs-number">4</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">quantity</span>: <span class="hljs-number">1</span> },
]
</code></pre>
            <h2 id="jump-functionality-cartjs"><span id="functionality-cartjs" class="heading-anchor"></span><a
                 href="#functionality-cartjs" class="heading-link"><i class="fa fa-link"></i> </a> Functionality -
              Cart.js</h2>
            <p>When a user clicks <em>Add to cart</em> the following things need to happen:</p>
            <ul>
              <li>Check and see if they already have a cart value stored in local storage; if they do, retrieve it; if
                they don’t, initialize it.</li>
              <li>From the retrieved cart data, see if the product id we’re adding already exists. If it does, increment
                its quantity by 1. If it doesn’t, add it to the data.</li>
            </ul>
            <p>Additionally, we’ll eventually also need to be able to:</p>
            <ul>
              <li>Remove an item from the cart</li>
              <li>Get a total count of items in the cart</li>
            </ul>
            <p>There’s nothing novel/Vue-specific about the above functionality, so to expedite this example, I’ve
              create a class we can use to accomplish the above tasks: <a
                 href="https://github.com/susanBuck/e28/blob/master/zipfoods/src/common/Cart.js">Cart.js</a>.</p>
            <p>We’ll expose an instance of this Cart class via our common <em>app.js</em> module:</p>
            <pre v-pre><code v-pre class="language-js hljs javascript"><span class="hljs-keyword">import</span> Cart <span class="hljs-keyword">from</span> <span class="hljs-string">'@/common/Cart.js'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> cart = <span class="hljs-keyword">new</span> Cart();
</code></pre>
            <h2 id="jump-add-to-cart"><span id="add-to-cart" class="heading-anchor"></span><a href="#add-to-cart"
                 class="heading-link"><i class="fa fa-link"></i> </a> Add to Cart</h2>
            <p>Next, within <em>ProductPage.vue</em> we can update the <em>addToCart</em> method to invoke our Cart
              class and add the requested item to the cart:</p>
            <pre v-pre><code v-pre class="language-js hljs javascript">addToCart(id) {
    cart.add(id); <span class="hljs-comment">// &lt;-- NEW</span>
},
</code></pre>
            <p>You can check your local storage data via your web inspector to make sure cart data is being persisted.
              Be sure to test out a couple different products, and also add multiples of the same product.</p>
            <h2 id="jump-visual-feedback-for-the-user"><span id="visual-feedback-for-the-user"
                    class="heading-anchor"></span><a href="#visual-feedback-for-the-user" class="heading-link"><i
                   class="fa fa-link"></i> </a> Visual feedback for the user</h2>
            <img src="../../../../s3.amazonaws.com/making-the-internet/vue-add-to-cart-confirmation@2x.png"
                 style="max-width:855px;" alt="">
            <p>To let the user know when an item has been added to their cart, add this element to the page below the
              <em>Add to cart</em> button:
            </p>
            <pre v-pre><code v-pre class="language-html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">transition</span> <span class="hljs-attr">name</span>=<span class="hljs-string">'fade'</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">class</span>=<span class="hljs-string">'alert'</span>
        <span class="hljs-attr">v-if</span>=<span class="hljs-string">'addAlert'</span>
    &gt;</span>Your cart has been updated!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">transition</span>&gt;</span>
</code></pre>
            <div markdown="1" class="squareTag fyi">
              <div class="banner"><i class="icon fa fa-info-circle"></i>FYI</div>
              <p>The above code takes advantage of <a href="https://vuejs.org/v2/guide/transitions.html">Vue
                  transitions...</a></p>
            </div>
            <p>So that this element does not show on page load, create a data property called <code
                    v-code>addAlert</code> and
              default it to <code v-pre>false</code>.</p>
            <p>Then amend your <code v-pre>addToCart</code> method to trigger this alert (by toggling <code
                    v-code>addAlert</code> to
              <code v-pre>true</code>) and then make it disappear after 2 seconds (by toggling <code
                    v-code>addAlert</code> back to
              <code v-pre>false</code>):
            </p>
            <pre v-pre><code v-pre class="language-js hljs javascript">addToCart() {
    
    cart.add(<span class="hljs-keyword">this</span>.product.id);

    <span class="hljs-comment">// Confirmation</span>
    <span class="hljs-keyword">this</span>.addAlert = <span class="hljs-literal">true</span>;
    setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (<span class="hljs-keyword">this</span>.addAlert = <span class="hljs-literal">false</span>), <span class="hljs-number">2000</span>);
}
</code></pre>
            <h2 id="jump-create-cartpage"><span id="create-cartpage" class="heading-anchor"></span><a
                 href="#create-cartpage" class="heading-link"><i class="fa fa-link"></i> </a> Create CartPage</h2>
            <img src="../../../../s3.amazonaws.com/making-the-internet/vue-zipfoods-cart@2x.png"
                 style="max-width:467px;" alt="">
            <p>Next we need to create a cart page to show our cart contents. There’s nothing novel about this, so I’m
              just going to share the final component instead of walking through it piece by piece:</p>
            <pre v-pre><code v-pre class="language-html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"cart-page"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Your Cart<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"items.length == 0"</span>&gt;</span>No items<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"cleanList"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"productsLoaded"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in items"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span>&gt;</span>
                {{ item.quantity }} x {{ getProductDetails(item.id).name }} 
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">'removeFromCart(item.id)'</span>&gt;</span>Remove<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { cart } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/common/app.js'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    <span class="hljs-attr">props</span>: [<span class="hljs-string">'products'</span>],
    data() {
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">items</span>: [],
        };
    },
    mounted() {
        <span class="hljs-keyword">this</span>.items = cart.getItems();
    },
    <span class="hljs-attr">computed</span>: {
        productsLoaded() {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.products.length &gt; <span class="hljs-number">0</span>;
        },
    },
    <span class="hljs-attr">methods</span>: {
        getProductDetails(id) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.products.filter(<span class="hljs-function">(<span class="hljs-params">product</span>) =&gt;</span> {
                <span class="hljs-keyword">return</span> product.id == id;
            }, id)[<span class="hljs-number">0</span>];
        },
        removeFromCart(id) {
            cart.remove(id);
        }
    },
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
            <h2 id="jump-cart-count-state-management"><span id="cart-count-state-management"
                    class="heading-anchor"></span><a href="#cart-count-state-management" class="heading-link"><i
                   class="fa fa-link"></i> </a> Cart count - State management</h2>
            <p>Next, we want to make it so a count of items in the user’s cart is always present in the navigation bar
              next to the cart link.</p>
            <img src="../../../../s3.amazonaws.com/making-the-internet/vue-cart-count@2x.png" style="max-width:519px;"
                 alt="">
            <p>To handle this, we’ll need access to some shared data (cart count) across multiple components:</p>
            <ul>
              <li>
                <code v-pre>App.vue</code> will need to display the cart count in the nav bar
              </li>
              <li>
                <code v-pre>ProductPage.vue</code> will need to update the cart count when new items are added
              </li>
              <li>
                <code v-pre>CartPage.vue</code> will need to update the cart count when items are removed
              </li>
            </ul>
            <p>We’ve already seen how we can share data amongst components via props and events - but this approach can
              start to get messy once we’re sharing data via multiple components.</p>
            <p>Knowing this, we want to start looking at some <strong>state management</strong> design patterns.</p>
            <p>For this cart exercise, we’re going to look at a very simple state management approach, and later level
              up to Vuex, a robust state management library for Vue.</p>
            <h2 id="jump-cart-count-simple-data-store"><span id="cart-count-simple-data-store"
                    class="heading-anchor"></span><a href="#cart-count-simple-data-store" class="heading-link"><i
                   class="fa fa-link"></i> </a> Cart count - simple data store</h2>
            <p>To set up our simple state management system, let’s create a new variable in <em>app.js</em> called
              <code v-pre>store</code> that will be the data store of our application - i.e. the thing responsible for
              managing the shared data. To begin, our store will contain one property, <code v-pre>cartCount</code>:
            </p>
            <pre v-pre><code v-pre class="language-js hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> store = {
    <span class="hljs-attr">cartCount</span>: <span class="hljs-number">0</span>
}
</code></pre>
            <p>This store will act as our “single source of truth” - any component that <code v-pre>store</code> from
              <em>app.js</em> will be able to read and update this data.
            </p>
            <p>For example, in <code v-pre>ProductPage.vue</code>, amend the <code v-pre>addToCart</code> method so
              that it also
              amends the store, updating the cartCount:</p>
            <pre v-pre><code v-pre class="language-js hljs javascript">addToCart() {
    cart.add(<span class="hljs-keyword">this</span>.product.id);
    
    store.cartCount = cart.count(); <span class="hljs-comment">// &lt;-- NEW</span>

    <span class="hljs-comment">// [...confirmation code redacted for brevity...]</span>
}
</code></pre>
            <p>Likewise, in <code v-pre>CartPage.vue</code>, amend the <code v-pre>removeFromCart</code> method so it
              also updates
              the store’s cart count:</p>
            <pre v-pre><code v-pre class="language-js hljs javascript">removeFromCart(id) {
    cart.remove(id);
    store.cartCount = cart.count(); <span class="hljs-comment">// &lt;-- NEW</span>
},
</code></pre>
            <h2 id="jump-displaying-the-cart-count"><span id="displaying-the-cart-count"
                    class="heading-anchor"></span><a href="#displaying-the-cart-count" class="heading-link"><i
                   class="fa fa-link"></i> </a> Displaying the cart count</h2>
            <p>Next we want to make it so the cart count is displayed in our app’s navigation bar right next to the Cart
              link.</p>
            <p>To accomplish this, first update <em>App.vue</em>’s <em>mounted</em> method so it will set a value for
              <em>store.cartCount</em> on initial page load.
            </p>
            <pre v-pre><code v-pre class="language-js hljs javascript">mounted() {
    store.cartCount = cart.count(); <span class="hljs-comment">// &lt;-- NEW</span>
}
</code></pre>
            <p>Additionally, we have have to expose the <code v-pre>store</code> constant as a data property so it’s
              available
              for use in the template:</p>
            <pre v-pre><code v-pre class="language-js hljs javascript">data() {
    <span class="hljs-keyword">return</span> {
        <span class="hljs-comment">// [...links redacted for brevity...]</span>
        <span class="hljs-attr">store</span>: store
    };
},
</code></pre>
            <p>Finally, to display the cart count, update the router link so it adds a number next to the link
              <em>if</em> the link is for the cart:
            </p>
            <pre v-pre><code v-pre class="language-html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span>
    <span class="hljs-attr">v-for</span>=<span class="hljs-string">"link in links"</span>
    <span class="hljs-attr">v-bind:key</span>=<span class="hljs-string">"link"</span>
    <span class="hljs-attr">v-bind:to</span>=<span class="hljs-string">"paths[link]"</span>
    <span class="hljs-attr">exact</span>
&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"link == 'cart'"</span>&gt;</span>({{ store.cartCount }})<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    {{ link }}
<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span>
</code></pre>
            <p>With the above code in place you should be able to see an accurate cart count on page load, and you
              should see that value update whenever items are added or removed from the cart.</p>
          </div>
        </div>
      </div>
    </div>
  </div>



  <script type="text/javascript">
    document.write = function () { };
    document.writeln = function () { };
  </script>

  <script>
    // Make data available to Vue
    var course = { "key": "e28", "path": "\/e28", "listing": "DGMD E-28", "name": "Single-Page Applications \u0026 Interfaces with Vue.js", "header": "DGMD E-28 \u003Cbr\u003ESingle-Page Apps \u0026 Interfaces w\/ Vue.js", "lectureDay": "Tuesday", "lectureTime": "8pm Eastern", "startDay": "Tue Sep 1", "shortName": "", "quickLinks": 1, "youtubePlaylist": "", "projects": { "p1": { "published": true, "id": "p1", "title": "Project 1: Fundamentals", "week": 7, "due": "Tue Oct 20 @ 11:59pm Eastern", "readme": "https:\/\/gist.github.com\/susanBuck\/c1bc32abf6984bddd1d9120e4c9520b6" }, "p2": { "published": true, "id": "p2", "title": "Project 2: SPA, SFCs, server interaction", "week": 11, "due": "Tue Nov 17 @ 11:59pm Eastern", "readme": "https:\/\/gist.github.com\/susanBuck\/f48844c9e23f4b411c82ec4b58291c38" }, "p3": { "published": true, "id": "p3", "title": "Project 3: Vuex, authentication, validation, testing", "week": 14, "due": "Tue Dec 15 @ 11:59pm Eastern", "readme": "https:\/\/gist.github.com\/susanBuck\/34be9f2a870df428595633fca86dd2fe" } }, "links": { "forum": "https:\/\/github.com\/susanBuck\/e28-fall20\/issues", "canvas": "https:\/\/canvas.harvard.edu\/courses\/79543", "canvasAssignments": "https:\/\/canvas.harvard.edu\/courses\/79543\/assignments" }, "nav": { "COURSE INFO": { "\/e28\/": "Home", "\/e28\/prereq": "Prerequisites", "\/e28\/policies": "Policies", "\/e28\/work": "Work \u0026 Grading", "\/e28\/software": "Software", "\/e28\/forum-about": "Forum" }, "Fall 2020": { "\/e28\/schedule": "Schedule\/Topics", "\/e28\/projects": "Projects" } } };
    var user = null;

  </script>
  <script src="../../../js/notes.js"></script>



</body>

</html>